<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tablero de Notas - TV</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: Arial, sans-serif;
      }

      body {
        background: #1a1a1a;
        color: white;
        padding: 20px;
        min-height: 100vh;
      }

      .header {
        background: #122247;
        color: white;
        padding: 25px;
        text-align: center;
        margin-bottom: 30px;
        border-radius: 15px;
      }

      .header h1 {
        font-size: 2.5rem;
        margin: 0;
      }

      .notes-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
        max-width: 1400px;
        margin: 0 auto;
      }

      .note {
        background: #ffffff;
        padding: 25px;
        border-radius: 20px;
        border-left: 10px solid #122247;
        color: #000000;
      }

      .note-content {
        font-size: 1.4rem;
        line-height: 1.5;
        margin-bottom: 15px;
        min-height: 80px;
        word-wrap: break-word;
      }

      .note-time {
        color: #666;
        font-size: 1.1rem;
        text-align: right;
        border-top: 1px solid #ddd;
        padding-top: 10px;
      }

      .no-notes {
        text-align: center;
        color: #a0aec0;
        font-size: 1.5rem;
        padding: 60px 20px;
        grid-column: 1 / -1;
      }

      .auto-refresh {
        text-align: center;
        color: #4299e1;
        margin: 15px 0;
        font-size: 1.1rem;
      }

      .last-update {
        text-align: center;
        color: #888;
        margin: 10px 0;
        font-size: 1rem;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>ðŸ“º Tablero de Notas - TV</h1>
      <div class="auto-refresh">ðŸ”„ Actualizando automÃ¡ticamente</div>
      <div class="last-update" id="lastUpdate">
        Ãšltima actualizaciÃ³n: <span id="updateTime"></span>
      </div>
    </div>

    <div class="notes-grid" id="notesGrid">
      <div class="no-notes">Cargando notas...</div>
    </div>

    <script>
      function loadNotes() {
        try {
          const notes = JSON.parse(
            localStorage.getItem("tableroNotas") || "[]"
          );
          const grid = document.getElementById("notesGrid");

          if (notes.length === 0) {
            grid.innerHTML =
              '<div class="no-notes">No hay notas disponibles</div>';
            return;
          }

          grid.innerHTML = notes
            .map(
              (note) => `
                    <div class="note" style="
                        background: ${note.backgroundColor || "#ffffff"};
                        border-left-color: ${note.borderColor || "#122247"};
                        color: ${note.textColor || "#000000"};
                    ">
                        <div class="note-content" style="
                            color: ${note.textColor || "#000000"};
                            font-size: ${note.fontSize || "1.4rem"};
                            font-weight: ${note.fontWeight || "normal"};
                            text-decoration: ${note.textDecoration || "none"};
                        ">
                            ${note.content}
                        </div>
                        <div class="note-time" style="color: ${
                          note.textColor || "#666"
                        }">
                            ${note.timestamp}
                        </div>
                    </div>
                `
            )
            .join("");

          document.getElementById("updateTime").textContent =
            new Date().toLocaleTimeString("es-ES");
        } catch (error) {
          console.error("Error cargando notas:", error);
        }
      }

      // Cargar notas al iniciar
      loadNotes();

      // Actualizar cada 5 segundos
      setInterval(loadNotes, 5000);

      // TambiÃ©n escuchar cambios en localStorage
      window.addEventListener("storage", loadNotes);
      window.addEventListener("focus", loadNotes);
    </script>
  </body>
</html>
